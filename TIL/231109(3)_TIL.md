# UIScrollView란?

포함된 뷰를 스크롤하고 확대 또는 축소할 수 있는 뷰 입니다.

```swift
@MainActor
class UIScrollView: UIView
```

`UIScrollView`는 `UITableView` 및 `UITextView`를 포함한 여러 `UIKit` 클래스의 슈퍼클래스입니다.

스크롤 뷰는 콘텐츠 뷰에서 조정 가능한 원점이 있는 뷰입니다.

> **콘텐츠 뷰(content view)**
> 
> `UIScrollView`를 사용할 때, 스크롤 가능한 콘텐츠를 담고 있는 뷰를 가리킵니다.
> 
> 이 콘텐츠 뷰는 스크롤 뷰의 `contentSize`에 의해 정의된 영역을 채우고 사용자가 스크롤 할 수 있는 실제 내용을 담습니다.
> 
> 콘텐츠 뷰는 `UIScrollView`의 직접적인 하위 뷰(subview)이거나, 더 복잡한 계층 구조의 일부일 수 있습니다.

> **콘텐츠 사이즈(contentSize)**
>
> `UIScrollView`의 `contentSize` 속성은 스크롤 뷰 내부에서 스크롤 가능한 콘텐츠의 영역을 나타냅니다.
> 
> 이것은 실제로 뷰의 가시적인 프레임보다 클 수 있는 콘텐츠의 너비와 높이를 정의합니다.
> 
> `contentSize`는 스크롤 뷰의 사용 가능한 스크롤 영역을 결정합니다.
> 
> 예를 들어, 스크롤 뷰의 프레임이 화면의 전체 크기와 동일하고 `contentSize` 가 더 크다면 사용자는 스크롤 뷰를 통해 그 추가된 크기만큼 콘텐츠를 스크롤 할 수 있습니다.
> 
> `contentSize`가 스크롤 뷰의 프레임 크기보다 작거나 같다면 스크롤 뷰는 스크롤되지 않습니다.
> 
> 따라서 개발자는 콘텐츠의 실제 크기에 따라 `contentSize`를 적절히 설정해야 합니다.
> 
> 이 속성은 스크롤 뷰의 `contentOffset`과 함께 사용되어 현재 스크롤된 위치를 결정하고,
> `contentInset`을 사용하여 스크롤 뷰의 가장자리에 여백을 추가할 수 있습니다.
> 
> `UIScrollView`에 콘텐츠를 추가하고 적절히 구성할 때 이 세가지 속성을 매우 중요합니다.

> **콘텐츠 오프셋(contentOffset)**
> 
> `contentOffset` 속성은 스크롤 뷰의 현재 스크롤 위치를 나타냅니다.
> 
> 구체적으로, `contentOffset`은 스크롤 뷰의 좌상단 모서리에서 콘텐츠 뷰의 모서리까지의 포인트를 `CGPoint` 값으로 표현합니다.
> 
> `contentOffset`의 `x` 값은 수평 스크롤 위치를, `y` 값은 수직 스크롤 위치를 나타냅니다.
> 예를 들어, `contentOffset`이 `(0,0)`이면 콘텐츠 뷰의 최상단이 스크롤 뷰와 정렬된 상태입니다.
> 
> `contentOffset`의 `y` 값이 증가하면 사용자는 콘텐츠를 아래로 스크롤한 것이며 `x` 값이 증가하면 오른쪽으로 스크롤한 것입니다.
> 
> 개발자들은 이 속성을 프로그래밍 방식으로 설정하여 특정 위치로 스크롤하는 등의 동작을 구현할 수 있습니다.
> 
> 또한, 사용자가 스크롤을 하면서 `UIScrollViewDelegate`의 메소드를 통해 `contentOffset` 값의 변화를 감지하고 추가적인 동작을 취할 수 있습니다.

> **콘텐츠 인셋(contentInset)**
> 
> `contentInset` 속성은 스크롤 뷰의 경계와 콘텐츠 사이의 여백(padding)을 설정하는 데 사용됩니다.
> 
> 이 여백은 스크롤 뷰의 `contentSize`에는 영향을 주지 않으면서 콘텐츠 주위에 추가적인 공간을 제공합니다.
> 
> `contentInset` 속성은 `UIEdgeInsets` 타입으로, 콘텐츠의 상단(top), 하단(bottom), 왼쪽(left), 오른쪽(right) 각각에 대한 여백을 지정할 수 있습니다.
>
> 예를 들어, `contentInset`의 상단을 20포인트로 설정하면 스크롤 뷰의 콘텐츠는 상단 경계로부터 20포인트 아래에 위치하게 됩니다.
> 
> 이는 사용자 인터페이스의 다른 요소들과 콘텐츠를 겹치지 않도록 하는 데 유용합니다.
> 
> 특히, `contentInset`은 스테이터스 바, 네비게이션 바, 탭 바, 툴바와 같은 요소들이 콘텐츠를 가리는 것을 방지하고, 콘텐츠가 이러한 UI 요소들 뒤에 숨어 버리는 것을 막기 위해 자주 사용됩니다.
> 
> 또한, 최신 iOS 버전에서는 `safeAreaInsets`를 사용하여 노치나 홈 인디케이터와 같은 화면의 특정 영역에 콘텐츠가 겹치지 않도록 자동으로 조정할 수 있습니다.
> 
> `UIScrollView`를 사용할 때 `contentInset`을 적절히 설정하는 것은 사용자에게 쾌적한 스크롤 경험을 제공하는 중요한 요소입니다.

일반적으로(반드시 그런 것은 아니지만) 앱의 기본 창(main window)과 일치하는 프레임에 콘텐츠를 클립합니다.

스크롤 뷰는 손가락의 움직임을 추적하고 그에 따라 원점을 조정합니다.

스크롤 뷰를 통해 콘텐츠를 표시하는 뷰는 콘텐츠 뷰의 오프셋에 고정된 새 원점에 따라 해당 부분을 그립니다.

**스크롤 뷰 자체는 수직 및 수평 스크롤 인디케이터를 표시하는 것 외에는 그리기를 수행하지 않습니다.**

스크롤 뷰는 언제 스크롤을 중지해야 하는지 알 수 있도록 콘텐츠 뷰의 크기를 알아야 합니다.
- 기본적으로 스크롤이 콘텐츠 범위를 초과하면 다시 되돌아옵니다.

스크롤 뷰에 표시되는 콘텐츠 그리기를 관리하는 객체는 뷰가 화면 크기를 초과하지 않도록 콘텐츠의 하위 뷰를 타일링해야 합니다.

> **타일링(tilling)**
> 
> 스크롤 뷰에서 컨텐츠를 `tiling` 한다는 것은, **전체 컨텐츠를 화면에 한 번에 모두 로드하는 대신, 화면에 보이는 부분만 로드하고,**
> **사용자가 스크롤을 하여 다른 부분을 볼 때 해당 부분을 로드하는 방식을 말합니다.**
> 
> 이는 메모리 사용을 최적화하고 앱의 성능을 개선하는 기법 중 하나입니다.
>
> 각 타일은 화면에 보여질 작은 뷰로, 전체 컨텐츠 중 일부를 나타냅니다.
> 
> 사용자가 스크롤하면, 현재 보이지 않는 타일들은 메모리에서 제거되고, 새로운 타일들이 생성되어 화면에 나타나는 영역에 컨텐츠를 표시하게 됩니다.
> 
> 이 방식은 대규모 이미지 뷰어, 지도 애플리케이션 또는 대용량 데이터 세트를 다루는 다른 애플리케이션에서 흔히 사용됩니다.

사용자가 스크롤 뷰에서 스크롤하면 이 객체는 필요에 따라 하위 뷰를 추가하고 제거합니다.

스크롤 뷰에는 스크롤 바가 없기 때문에 터치가 스크롤 의도를 나타내는지 아니면 콘텐츠의 하위 뷰를 추적하려는 의도를 나타내는지 알아야 합니다.

이 결정을 내리기 위해 타이머를 시작하여 터치다운 이벤트를 일시적으로 차단하고 타이머가 실행되기 전에 터치하는 손가락이 움직이는지 확인합니다.

위치에 큰 변화가 없이 타이머가 실행되면 스크롤 뷰는 콘텐츠 뷰의 터치된 하위 뷰에 추적 이벤트를 보냅니다.

그런 다음 타이머가 경과하기 전에 사용자가 손가락을 충분히 드래그하면 스크롤 뷰는 하위 뷰의 추적을 취소하고 스크롤 자체를 수행합니다.

서브클래스는 스크롤 뷰가 스크롤 동작을 처리하는 방법에 영향을 주기 위해 `touchesShouldBegin(_:with:in:)`, `isPagingEnabled` 및 `touchesShouldCancel(in:)` 메서드(스크롤 뷰가 호출함)를 재정의할 수 있습니다.

스크롤 뷰는 콘텐츠의 확대 및 축소 그리고 이동도 처리합니다.

사용자가 핀치-인 또는 핀치-아웃 동작을 하면 스크롤 뷰는 콘텐츠의 오프셋과 크기를 조정합니다.

동작이 끝나면 콘텐츠 뷰를 관리하는 객체는 필요에 따라 콘텐츠의 하위 뷰를 업데이트 합니다.(제스처가 종료되더라도 손가락이 여전히 눌려져 있을 수 있습니다.)

제스처가 진행되는 동안 스크롤 뷰는 하위 뷰에 추적 호출을 보내지 않습니다.

`UIScrollView` 클래스에는 `UIScrollViewDelegate` 프로토콜을 채택해야 하는 대리자가 있을 수 있습니다.

확대 및 축소 그리고 이동이 작동하려면 대리자가 `viewForZooming(in:)` 및`scrollViewDidEndZooming(_:with:at:Scale:)`을 모두 구현해야 합니다.

또한 `maximumZoomScale` 및 `minimumZoomScale` 확대/축소 배율은 달라야 합니다.

## 상태 보존

이 뷰의 `RestorationIdentifier` 속성에 값을 할당하면 앱 실행 사이에 스크롤 관련 정보를 보존하려고 시도합니다.

특히, `ZoomScale`, `contentInset` 및 `contentOffset` 속성의 값이 유지됩니다.

복원하는 동안 스크롤 뷰는 콘텐츠가 이전과 동일한 위치로 스크롤된 것처럼 보이도록 이러한 값을 복원합니다.

상태 보존 및 복원 작동 방식에 대한 자세한 내용은 [App Programming Guide for iOS](https://developer.apple.com/documentation/uikit#//apple_ref/doc/uid/TP40007072)를 참조하십시오.
