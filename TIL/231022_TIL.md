# 메모리와 변수의 수명.

**😀 iOS 개발에서 전역 변수의 수명은 대부분 어떤 문맥에서 이 질문을 하는지에 따라 다릅니다.**

---

## 1️⃣ **진정한 전역 변수.**

- **이 변수들은 어떤 클래스, 구조체, 함수 밖에 정의되어 있으며, 주로 Swift 파일의 최상위에 위치합니다.**
    - **✅ 그들의 수명은 본질적으로 앱 프로세스의 수명과 같습니다.**
        - **✅ 앱이 시작되면 이러한 변수들은 할당되고 초기화되며, 앱이 종료될 때까지 메모리에 남아 있습니다.**

## 2️⃣ **정적 클래스 / 구조체 변수.**

- **이 변수들은 클래스 또는 구조체 내부에 정의되지만 `static`으로 선언됩니다.**
    - **✅ 그들의 수명 역시 앱의 프로세스 수명과 본질적으로 같습니다.**
        - **✅ 이 변수들은 처음 접근될 때 생성 및 초기화되며 앱이 종료될 때까지 메모리에 남아 있습니다.**

## 3️⃣ **인스턴스 변수.**

- **이 변수들은 클래스나 구조체의 인스턴스에 속합니다.**
    - **✅ 그들의 수명은 그들이 속한 인스턴스의 수명에 의해 결정됩니다.**
        - **✅ 클래스의 인스턴스가 할당 해제되면(즉, 강한 참조가 가리키지 않을 때) 그 인스턴스 변수들도 할당 해제됩니다.**

## 4️⃣ **함수 / 메소드 내 변수.**

- **함수나 메소드 내에 선언된 변수입니다.**
    - **✅ 그들의 수명은 대체로 함수 호출의 지속 시간입니다.**
        - **✅ 그러나 클로저에 의해 포착되고 클로저가 유지되면 더 긴 시간 동안 존재할 수 있습니다.**

## 5️⃣ **클로저 내 변수.**

- **✅ 변수가 클로저에 의해 포착되면, 클로저가 유지되는 동안 그 수명이 연장될 수 있습니다.**
    - **✅ 클로저가 강한 참조 주기(유지 주기)를 생성하면 메모리 누수로 이어져 포착된 변수들이 유지 주기가 깨질 때까지 무한정 메모리에 남아 있을 수 있습니다.**

---

**본질적으로, 진정한 전역 변수와 정적 변수는 앱의 전체 생명주기 동안 메모리에 남아 있습니다.**

- 그러나 다른 유형의 변수들은 그들의 문맥, 즉 객체의 생명주기, 함수 호출의 지속 시간, 클로저와의 관계에 따라 수명이 결정됩니다.

- iOS에서 메모리를 효과적으로 관리하기 위해서는 자동 참조 계수(ARC) 시스템을 잘 이해하는 것이 중요합니다.
    - 이 시스템은 객체가 언제와 어떻게 할당 해제되는지를 결정합니다.
        - 강한, 약한, 소유되지 않은 참조를 적절히 관리하면 불필요할 때 객체와 관련된 변수가 할당 해제되도록 할 수 있으며 메모리 누수를 방지할 수 있습니다
