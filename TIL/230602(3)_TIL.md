# 의존성 주입(Dependency Injection, DI) 💉

---

## 의존성 주입(Dependency Injection, DI)이란?
**의존성 주입(Dependency Injection, DI)은 객체지향 프로그래밍에서 사용하는 설계 패턴 중 하나로, 객체가 서로 상호작용하는 경우, 한 객체가 다른 객체에 대한 의존성을 외부에서 주입받는 방식을 말합니다.**

> ### 의존성(Dependency)이란?
> **소프트웨어 공학에서 의존성(Dependency)한 요소가 다른 요소의 기능이나 동작에 의존하는 관계를 의미합니다.**
> 이는 클래스, 모듈, 서비스 등 다양한 소프트웨어 구성요소 사이에서 발생할 수 있습니다.
> 
> 예를 들어, 클래스 A가 클래스 B의 메소드를 사용하면 클래스 A는 클래스 B에 의존하게 됩니다.
> 이 경우, 클래스 B의 메소드에 변경이 생기면 클래스 A에도 영향이 미칠 수 있습니다.
> 즉, 클래스 A의 정상적인 기능 수행은 클래스 B의 특정 메소드에 의존하게 되는 것입니다.
> 
> 이러한 의존성 관리는 소프트웨어 설계에서 매우 중요한 부분입니다.
> 의존성이 높을수록 코드의 재사용성이 떨어지고, 변경에 대한 복잡성이 증가합니다.
> 따라서 가능한 한 의존성을 줄이고, 필요한 의존성은 잘 관리하는 것이 중요합니다.
> 이를 위해 주로 사용되는 방법이 의존성 주입(Dependency Injection), 의존성 역전 원칙(Dependency Inversion Principle)등 입니다.

**일반적으로 객체 내부에서 필요한 객체를 직접 생성하여 사용하는데, 이렇게 되면 객체 간의 밀접한 결합이 생겨 유연성과 재사용성이 떨어질 수 있습니다.**

예를 들어, 특정 서비스 클래스가 데이터베이스에 접근하기위해 데이터베이스 접근 클래스를 직접 생성하면, 서비스 클래스는 데이터베이스 접근 클래스에 강하게 의존하게 됩니다.

이 경우 데이터베이스 접근 방식이 변경되면, 그에 따라 서비스 클래스도 수정해야 하는 문제가 발생합니다.

**이런 문제를 해결하기 위해 의존성 주입 방식을 사용하면, 객체는 외부에서 필요한 객체를 주입받아 사용하므로 간접적으로만 의존하게 됩니다.**

**이렇게 하면 특정 구현체에 의존하지 않게 되어 코드의 유연성과 재사용성이 증가하며, 단위 테스트를 수행하기도 훨씬 쉬워집니다.**

## 의존성 주입(Dependency Injection, DI)방식
1. 생성자 주입(Constructor Injection)
- 객체 생성 시 생성자를 통해 의존성을 주입하는 방식입니다. 객체가 생성되는 시점에 필요한 의존성이 모두 주입되므로, 객체의 완전성을 보장합니다.

2. 세터 주입(Setter Injection)
- 객체 생성 후 세터 메서드를 통해 의존성을 주입하는 방식입니다. 필요에 따라 의존성을 변경할 수 있는 유연성을 제공하지만, 객체의 사용 시점에 모든 의존성이 제대로 주입되었는지 확인해야 합니다.

3. 필드 주입(Field Injection)
- 객체의 필드에 직접 의존성을 주입하는 방식입니다. 일반적으로는 권장되지 않는 방식이며, 특히 자바에서는 Reflection을 사용해야 하므로 복잡도가 증가할 수 있습니다.

**이 중에서도 생성자 주입이 가장 권장되는 방식으로, 객체의 불변성을 보장하며 필요한 의존성이 모두 주입되었음을 보장합니다.**

#### 예시 코드🧑🏻‍💻
```swift!
class Bike {
	var engine: Engine
	
	init(engine: Engine) {
		self.engine = engine
	}
}

class Engine {
	var power = 100
}

let benzEngine = Engine()
let myBike = Bike(engine: benzEngine)
```
의존성 주입이란 말 그대로 의존성을 주입시킨다는 뜻입니다.
내부에서 초기화가 이루어지는 것이 아니라 외부에서 객체를 생성하여 내부에 주입해주는 것입니다.

위 코드에서는 benzEngine을 외부에서 생성하여 Bike를 초기화할 때 benzEngine을 주입시켜주고 있습니다.
