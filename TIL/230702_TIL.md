# 230702 TIL 👨‍🔬

---

## Concurrency Programming(동시성 프로그래밍) 👨‍🔬

**1️⃣ Introduction**</br>
**💡 동시성은 동시에 발생하는 여러 가지 개념입니다.**
멀티코어 CPU의 확산과 각 프로세서의 코어 수가 계속 증가할 것임을 인식함에 따라 소프트웨어 개발자는 이를 활용할 수 있는 새로운 방법이 필요합니다.
OS X 및 iOS와 같은 운영 체제는 여러 프로그램을 병렬로 실행할 수 있지만 대부분의 프로그램은 백그라운드에서 실행되며 지속적인 프로세서 시간이 거의 필요하지 않은 작업을 수행합니다.
사용자의 관심을 끌고 컴퓨터를 바쁘게 유지하는 것은 현재 포그라운드 애플리케이션입니다.
애플리케이션에 할 일이 많지만 사용 가능한 코어의 일부만 차지하는 경우 이러한 추가 처리 리소스가 낭비됩니다.

과거에는 애플리케이션에 동시성을 도입하려면 하나 이상의 추가 스레드를 생서애햐 했습니다.
안타깝게도 스레드 코드를 작성하는 것은 어렵습니다.

스레드는 수동으로 관리해야 하는 하위 수준 도구입니다.
응용 프로그램에 대한 최적의 스레드 수가 현재 시스템 부하 및 기본 하드웨어에 따라 동적으로 변경될 수 있다는 점을 감안할 때 올바른 스레딩 솔루션을 구현하는 것은 불가능하지는 않더라도 매우 어렵습니다.
또한 일반적으로 스레드와 함께 사용되는 동기화 메커니즘은 향상된 성능을 보장하지 않고 소프트웨어 설계에 복잡성과 위험을 추가합니다.

OS X와 iOS는 스레드 기반 시스템 및 애플리케이션에서 전통적으로 발견되는 것보다 동시 작업 실행에 더 비동기적인 접근 방식을 채택합니다.

스레드를 직접 생성하는 대신 애플리케이션은 특정 작업을 정의한 다음 시스템이 이를 수행하도록 하면 됩니다.
시스템이 스레드를 관리하도록 함으로써 응용 프로그램은 원시 스레드로는 불가능한 수준의 확장성을 얻습니다.

응용 프로그램 개발자는 또한 더 간단하고 효율적인 프로그래밍 모델을 얻을 수 있습니다.

---

## Concurrency and Application Design(동시성 및 애플리케이션 설계)

컴퓨팅 초기에는 컴퓨터가 수행할 수 있는 단위 시간당 최대 작업량이 CPU의 클럭 속도에 의해 결정되었습니다.
그러나 기술이 발전하고 프로세서 설계가 더욱 소형화 됨에 따라 열 및 기타 물리적 제약으로 인해 프로세서의 최대 쿨럭 속도가 제한되기 시작했습니다.

따라서 칩 제조업체는 칩의 전체 성능을 높일 수 있는 다른 방법을 찾았습니다.
그들이 정착한 솔루션은 각 칩의 프로세서 코어 수를 늘리는 것이었습니다.
코어 수를 늘림으로써 단일 칩은 CPU 속도를 높이거나 칩 크기 또는 열 특성을 변경하지 않고도 초당 더 많은 명령을 실행할 수 있습니다.
유일한 문제는 추가 코어를 활용하는 방법이었습니다.

다중 코어를 활용하려면 컴퓨터에 여러 작업을 동시에 수행할 수 있는 소프트웨어가 필요합니다.
OS X 또는 iOS와 같은 최신 멀티태스킹 운영 체제의 경우 주어진 시간에 100개 이상의 프로그램이 실행될 수 있으므로 각 프로그램을 다른 코어에서 예약하는 것이 가능해야 합니다.

그러나 이러한 프로그램의 대부분은 실제 처리 시간을 거의 사용하지 않는 시스템 데몬 또는 백그라운드 응용 프로그램입니다.
대신 실제로 필요한 것은 개별 애플리케이션이 추가 코어를 보다 효과적으로 사용할 수 있는 방법입니다.

애플리케이션이 다중 코어를 사용하는 기존 방식은 다중 스레드를 생성하는 것입니다.
그러나 코어 수가 증가함에 따라 스레드 솔루션에 문제가 있습니다.
가장 큰 문제는 스레드 코드가 임의의 수의 코어로 잘 확장되지 않는다는 것입니다.
코어 수만큼 많은 스레드를 생성할 수 없으며 프로그램이 잘 실행되기를 기대할 수 없습니다.
알아야 할 것은 효율적으로 사용할 수 있는 코어 수이며, 이는 응용 프로그램이 자체적으로 계산하기 어려운 문제입니다.
정확한 수치를 얻을 수 있더라도 너무 많은 스레드를 프로그래밍하고 효율적으로 실행하고 서로 간섭하지 않도록 하는 문제가 여전히 남아있습니다.

따라서 문제를 요약하면 응용 프로그램이 다양한 수의 컴퓨터 코어를 활용할 수 있는 방법이 필요합니다.
단일 애플리게이션이 수행하는 작업량도 변화하는 시스템 조건을 수용할 수 있도록 동적으로 확장할 수 있어야 합니다.
그리고 솔루션은 이러한 코어를 활용하는 데 필요한 작업량을 늘리지 않도록 충분히 단순해야 합니다.
좋은 소식은 Apple의 운영 체제가 이러한 모든 문제에 대한 솔루션을 제공한다는 것입니다.

---

### 용어 사전 📓

**1️⃣ 스레드(thread)**</br>
**💡 스레드(thread)는 컴퓨터 과학에서 프로세스 내에서 실행되는 단일 순차적인 제어 흐름입니다.**
스레드는 프로세스 내에서 실행 상태를 공유하며, 동일한 프로세스의 다른 스레드와 메모리와 같은 리소스를 공유할 수 있습니다.
이러한 특징 때문에 스레드는 가볍게 여러 동작을 동시에 수행하는데 사용될 수 있습니다.

**💡 프로세스는 일반적으로 하나 이상의 스레드를 가지며, 이 중 하나는 메인 스레드 또는 주 스레드라고 불립니다.**
**메인 스레드 외에도 추가적으로 생성된 스레드들은 프로그램의 병렬성을 향상시키는 데 사용되며, 이는 특히 멀티 코어 프로세서에어 유용합니다.**

**🙌 스레드의 주요 특징들은 다음과 같습니다.**

1. **자원 공유 :**  동일한 프로세스 내의 스레드는 코드, 데이터 및 시스템 자원을 공유합니다. 이것은 스레드 간의 통신을 쉽게 만들며, 프로세스 생성보다 메모리와 시스템 리소스를 적게 사용합니다.
2. **병렬성 :** 멀티 코어 또는 멀티 프로세서 시스템에서는 여러 스레드가 동시에 실행될 수 있습니다. 이는 프로그램의 선능을 향상시키며, 시스템의 병렬 처리 능력을 향상시킵니다.
3. **응답성 :** 한 스레드가 블록되거나 긴 작업을 수행하는 경우, 다른 스레드는 계속 실행될 수 있습니다. 이는 프로그램의 응답성을 향상시킵니다.

그러나, 스레드를 사용할 때는 동기화 문제, 경쟁 조건, 데드락 등의 복잡한 문제를 고려해야 합니다.
이러한 문제들은 동시에 여러 스레드가 동일한 메모리에 엑세스하려고 할 때 발생할 수 있으며, 이를 제어하지 않으며면 프로그램에서 예기치 않은 오류를 발생기킬 수 있습니다.
따라서 이러한 문제를 처리하기 위한 동기화 메커니즘(예: 뮤텍스, 세마포어 등)이 필요합니다.

---

**2️⃣ 리소스(resource)**</br>
**💡 컴퓨터 과학에서 "리소스(resource)"라는 용어는 컴퓨터 시스템에서 사용되는 모든 유형의 물리적 또는 가상적인 자원을 의미합니다.**
이러한 리소스는 프로세서 시간, 메모리 공간, 네트워크 대역폭, 디스크 스토리지, 하드웨어 장치(예: 프린터), 그리고 소프트웨어 및 데이터에 대한 엑세스 권한 등을 포함합니다.

다음은 이러한 리소스의 주요 유형입니다.

1. **CPU(중앙 처리 장치) 시간 :** 프로세서의 계산 능력은 가장 중요한 컴퓨팅 리소스 중 하나입니다. 컴퓨터의 모든 작업은 결국 CPU에서 처리되며, 이는 프로세서 시간을 필요로 합니다.
2. **메모리 :** 프로그램은 실행되는 동안 데이터를 저장하고 조작하기 위해 메모리를 사용합니다. 이는 일반적으로 RAM(Random Access Memory)을 의미하지만, 캐시 메모리, 레지스터 등 다른 형태의 메모리도 포함됩니다.
3. **디스크 스토리지 :** 디스크 스토리지는 파일을 저장하는 데 사용되며, 데이터베이스, 사용자 파일, 시스템 파일 등 다양한 형태의 데이터를 저장합니다.
4. **네트워크 대역폭 :** 네트워크 연결은 데이터를 한 장소에서 다른 장소로 전송하는 데 사용되는 리소스입니다. 네트워크 대역폭은 한 번에 전송할 수 있는 데이터의 양을 결정합니다.
5. **하드웨어 장치 :** 프린터, 스캐너, 그래픽 카드, 사운드 카드 등의 하드웨어 장치도 리소스로 간주됩니다.

프로그램이 이러한 리소스를 효율적으로 사용하고 관리하면, 프로그램의 성능과 응답성이 향상되고 시스템 자원을 더 효율적으로 사용할 수 있습니다.
그러나, 여러 프로그램이나 프로세스, 스레드가 동일한 리소스에 동시에 엑세스하려고 할 때는, 이를 적절히 조정하고 관리하는 것이 중요합니다.
이를 위해 동기화 메커니즘과 운영 체제의 리소스 관리 기능이 사용됩니다.

---

**3️⃣ 동시성(Concurrency)**</br>
**💡 컴퓨터 과학에서 동시성(Concurrency)은 여러 작어비 병렬적으로 수행되는 것을 의미합니다.**
이것은 멀티태스킹, 멀티프로세싱, 분산 처리, 병렬 컴퓨팅 등과 같은 컴퓨팅 환경에서 주로 발생합니다.
이를 통해 프로그램은 다수의 작업을 동시에 처리할 수 있습니다.

컴퓨터 과학에서 동시성은 크게 두 가지 유형으로 나뉩니다.

1. **명시적 동시성(Explicit Concurrency) :** 프로그래머가 직접 스레드나 프로세스를 생성하고 관리하는 것을 의미합니다. 프로그래머는 코드에서 스레드나 프로세스를 명시적으로 생성하고, 그들 사이에서 자원을 공유하도록 관리해야 합니다. 예를 들어 자바에서는 `Thread` 클래스를 사용하여 명시적 동시성을 구현할 수 있습니다.
2. **묵시적 동시성(Implicit Concurrency) :** 프로그램이나 언어가 자동으로 병렬 작업을 관리하는 것을 의미합니다. 프로그래머는 동시성을 명시적으로 코드에 적용하지 않아도, 컴파일러나 인터프리터, 운영체제 등이 작업을 병렬적으로 수행하도록 할 수 있습니다. 예를 들어, 함수형 프로그래밍 언어인 'Haskell'은 묵시적 동시성을 지원합니다.

동시성을 관리하는 것은 복잡할 수 있으며, 여러 가지 도전과제를 안고 있습니다. 예를 들어, 두 개 이상의 프로세스나 스레드가 동시에 같은 자원에 액세스하려고 할 때 발생하는 '경쟁 조건(Race Condition)'문제, 또는 '데드락(Deadlock)'과 같은 상황에서 자원 접근을 동기화하는 것은 큰 도전입니다.

또한, 동시성을 올바르게 구현하면, 애플리케이션의 성능을 향상시키고, 응답 시간을 줄이고, 자원을 더 효율적으로 사용할 수 있게 됩니다.
따라서 동시성을 멀티코어 프로세서, 분산 시스템, 클라우드 컴퓨팅 등 오늘날의 많은 컴퓨팅 환경에서 핵심적인 개념입니다.

---

**4️⃣ 운영 체제(Operating System,OS)**</br>
**💡 컴퓨터 과학에서 운영 체제(Operating System, OS)는 컴퓨터 하드웨어와 소프트웨어 리소스를 관리하고, 사용자와 컴퓨터 하드웨어 간의 인터페이스 역할을 하는 소프트웨어입니다.**
즉, 운영 체제는 컴퓨터 시스템의 중추적인 부분으로, 다양한 응용 프로그램이 효과적으로 작동할 수 있도록 지원합니다.

운영 체제의 주요 역할과 기능은 다음과 같습니다.

1. **프로세스 관리 :** 운영 체제는 시스템 내의 모든 프로세스를 관리합니다. 프로세스 스케줄링, 생성 및 제거, 프로세스 간 통신 및 동기화 등을 담당합니다.
2. **메모리 관리 :** 운영 체제는 시스템의 메모리를 관리하며, 각 프로세스에 메모리를 할당하고, 사용되지 않는 메모리를 회수하는 역할을 합니다.
3. **디스크 및 파일 시스템 관리 :** 운영 체제는 디스크 공간을 관리하고, 파일 시스템을 제공하여 사용자가 파일을 생성, 삭제, 수정하고 디렉터리 구조를 관리할 수 있게 합니다.
4. **장치 관리 :** 운영 체제는 다양한 하드웨어 장치(키보드, 마우스, 디스플레이, 프린터 등)를 관리하며, 이등 장치의 드라이버를 관리합니다.
5. **시스템 호출 인터페이스 :** 운영 체제는 시스템 호출이라는 인터페이스를 제공하여, 응용 프로그램이 하드웨어 및 시스템 리소스에 안전하게 액세스할 수 있게 합니다.
6. **보안과 접근 제어 :** 운영 체제는 시스템의 보안을 유지하며, 사용자 인증, 접근 제어, 데이터 보호 등의 기능을 수행합니다.

대표적인 운영 체제로는 마이크로소프트의 Windows, Apple의 macOS와 iOS, Linux 기반의 Android 및 다양한 서버 및 데스크톱 Linux 배포판(Ubuntu, Fedora, CentOS 등)이 있습니다.
각 운영 체제는 특정한 목적에 맞게 설계되어 있으며, 그에 따라 다양한 기능과 인터페이스를 제공합니다.

---

**5️⃣ CPU의 쿨럭 속도**</br>
**💡 컴퓨터 과학에서 CPU의 쿨럭 속도는 CPU가 얼마나 빠르게 명령어를 실행할 수 있는지를 나타내는 주요 지표 중 하나입니다.**
쿨럭 속도는 일반적으로 헤르츠(Hz)로 측정되며, 1헤르츠는 1초에 한 번의 사이클을 의미합니다.
이제는 대부분의 CPU는 기가헤르츠(GHz) 단위의 클럭 속도를 가지고 있습니다.

클럭 속도는 CPU의 내부 클럭이라고도 불리는 펄스 제너레이터에 의해 결정됩니다.
이 펄스 제너레이터는 일정한 주기로 전기적 신호를 보내며, 이 손호는 CPU가 명령어를 해것하고 실행하는 타이밍을 결정합니다.
따라서 클럭 속도가 높을수록 CPU는 더 많은 명령어를 더 빠르게 처리할 수 있습니다.

**그러나 CPU의 전체 성능은 클럭 속도만으로 결정되는 것은 아닙니다.**
**CPU의 성능은 여러 요인에 의해 영향을 받습니다.**
예를 들어, CPU의 아키텍처(즉, 명령어를 어떻게 해석하고 실행하는지에 대한 설계), 캐시 크기(데이터를 빠르게 액새스할 수 있도록 저장하는 메모리의 양), 코어 수(동시에 실행할 수 있는 명령어의 수), 명령어 당 사이클 수(CPI), 파이프라이닝, 병렬 처리 능력 등도 CPU 성능에 큰 영향을 미칩니다.

따라서, 클럭 속도가 높다고 해서 항상 더 뛰어난 성능을 가진 CPU가 되는 것은 아닙니다.
CPU의 전체 아키텍처와 그 외 다른 요인들을 종합적으로 고려해야 합니다.
또한 클럭 속도가 높을수록 발생하는 열도 많아져서, 적절한 냉각 장치가 필요하게 됩니다.

---

**6️⃣ 코어(Core)**</br>
**💡 컴퓨터 과학에서 코어(Core)는 CPU 내부에 있는 독립적인 프로세서입니다.**
각 코어는 독립적으로 명령어를 실행할 수 있으므로, 멀티코어 프로세서는 한 번에 여러 명령어를 동시에 실행할 수 있습니다.

일반적으로, 한 코어는 한 번에 한 가지 작업만 처리할 수 있습니다.
그러나, 멀티코어 프로세서는 여러 개의 코어가 동시에 작업을 처리하므로, 단일 코어 프로세서보다 많은 작업을 더 빠르게 처리할 수 있습니다.
이는 특히 병렬 처리가 가능한 작업이나 여러 프로그램을 동시에 실행하는 데 유용합니다.

예를 들어, 쿼드 코어 프로세서는 4개의 독립적인 코어를 가지고 있으며, 각각의 코어는 독립적으로 작업을 처리할 수 있습니다.
이는 4개의 작업을 거의 동시에 처리할 수 있으며, 이는 단일 코어 프로세서보다 훨씬 빠른 성능을 제공합니다.

그러나, 멀티코어 프로세서의 성능 향상은 작업의 종류와 어플리케이션이 얼마나 잘 병렬화되어 있는지에 따라 다릅니다.
만약 프로그래밍 병렬 처리를 지원하지 않는다면, 추가 코어는 큰 성능 향상을 제공하지 않을 수 있습니다.

또한, 오늘날의 많은 프로세서는 하이퍼스레딩 또는 동일한 코어에서 여러 스레드를 동시에 실행하는 기능을 지원합니다.
이는 하나의 코어가 두 개의 작은 서브 코어처엄 동작하게 하여, 프로세서의 효율성을 높이고, 병렬 처리 성능을 높입니다.

마지막으로, 멀티코어 프로세서는 더 많은 전역을 소비하며 더 많은 열을 생성할 수 있습니다. 따라서, 적절한 전력 관리 및 냉각 전략이 필요합니다.

---

**7️⃣ 데몬(Demon)**</br>
**💡 컴퓨터 과학에서 '시스템 데몬(System demon)' 또는 단순히 '데몬(Demon)'은 백그라운드에서 실행되는 프로그램 또는 프로세스를 지칭하는 용어입니다.**
**데몬(Demon)은 사용자와 직접적으로 상호작용하지 않고, 시스템 관리 및 운영에 필요한 작업을 자동으로 수행합니다.**

이 용어는 주로 유닉스와 같은 운영 체제에서 사용되며, 데몬의 이름은 **Disk And Execution MONitor**의 약자에서 유래되었습니다.

데몬은 다양한 목적을 위해 사용되며, 그 예시로는 다음과 같은 것들이 있습니다.

1. **네트워킹 :** HTTP, FTP, SSH 등의 네트워크 프로토콜을 처리하는 데몬이 있습니다. 예를 들어, 웹 서버는 HTTP 요청을 처리하는 데몬으로 작동합니다.
2. **스케줄링 :** cron 데몬과 같은 스케줄링 데몬은 정해진 시간에 특정 작업을 실행합니다.
3. **시스템 로깅 :** syslog 데몬은 로그를 기록하고 관리하는 데 사용됩니다.
4. **하드웨어 모니터링 :** 일부 데몬은 하드웨어 상태를 모니터링하고, 예를 들어 배터리가 부족하거나 온도가 너무 높은 경우에 알림을 보내는 역할을 합니다.
5. **메일 전송 :** SMTP 데몬과 같은 데몬은 이메일 메시지를 전송하고 수신하는 역할을 합니다.

데몬은 일반적으로 시스템이 부팅될 때 시작되며, 시스템이 종료될 때까지 실행됩니다.
또한, 데몬은 일반적으로 시스템의 일부로 제공되거나, 별도의 소프트웨어 패키지의 일부로 제공됩니다.
시스템 관리자는 데몬을 구성하고 관리할 수 있으며, 필요한 경우 데몬을 시작하거나 중지할 수 있습니다.

---

**8️⃣ 프로세서(Processor)**</br>
**💡 컴퓨터 과학에서 프로세서(Processor)는 컴퓨터의 중앙 처리 장치(Central Processing Unit, CPU)를 가리키는 용어로 사용됩니다.**
CPU는 컴퓨터의 두뇌라고 할 수 있으며, 모든 계산과 명령어 처리를 담당합니다.

프로세서는 컴퓨터 시스템의 메모리에서 명령어를 가져와 해석하고 실행하는 일련의 단계를 반복적으로 수행합니다.
**이 과정을 '패치(Fetch)', '디코드(Decode)', '실행(execute)'이라는 세 단계로 나눌 수 있으며, 이 세 단계를 합쳐 '명령어 사이클(instruction cycle)' 또는 'CPU 사이클'이라고 부릅니다.**

프로세서의 주요 구성 요소는 다음과 같습니다.

1. **제어 장치(Control Unit) :** 제어 장치는 명령어 사이클을 제어하며, 메모리에서 명령어를 가져오고(패치), 명령어를 해석(디코드)하고, 필요한 연산을 실행하거나 입출력 동작을 수행하는 데 필요한 신호를 보냅니다.
2. **산술 논리 장치(Arithmetic Logic Unit, ALU) :** ALU는 모든 산술 연산(덧셈, 뺄셈, 곱셈, 나눗셈 등)과 논리 연산(AND, OR, NOT 등)을 수행합니다.
3. **레지스터(Register) :** 레지스터는 데이터나 명령어를 임시로 저장하는 매우 빠른 메모리입니다. 레지스터는 CPU 내부에 있으므로, 데이터를 레지스터에서 빠르게 읽고 쓸 수 있습니다.

프로세서의 성능은 클럭 속도, 코어의 수, 캐시 크기, 명령어 당 사이클 수(CPI), 인스트럭션 셋 아키텍처(ISA) 등 다양한 요인에 의해 결정됩니다.
프로세서는 일반적인 컴퓨팅 작업을 수행하는 일반 목적의 프로세서와 그래픽 처리, 신호 처리, 머신 러닝 계산 등 특정 목적의 프로세서로 구분할 수 있습니다.

---

**9️⃣ 프로세스(Process)**</br>
**💡 컴퓨터 과학에서 프로세스(Process)는 실행 중인 프로그램의 인스턴스를 가리킵니다.**
프로세스는 프로그램 코드(일반적으로 바이너리 형태로 디스크에 저장됨)와 그 상태를 유지하는 데 필요한 컴퓨터 자원의 모음으로 구성됩니다.

프로세스는 다음과 같은 정보를 포함합니다.

1. **메모리 :** 프로세스는 프로그램 코드와 데이터를 저장하는 메모리 공간을 필요로 합니다. 이 공간은 일반적으로 텍스트(코드), 데이터(전역 변수), 힙(동적 할당된 메모리), 스택(함수 호출 및 지역 변수)의 네 부분으로 나뉩니다.
2. **프로세서 상태 :** 프로세스는 현재 실행 중인 명령어 위치(프로그램 카운터)와 레지스터 상태 등의 정보를 포함합니다.
3. ** 입출력 상태 :** 프로세스는 열린 파일, 네트워크 연결, 사용자 입력 등의 정보를 유지합니다.
4. **보안 및 접근 권한 :** 프로세스는 자신의 메모리와 리소스에 대한 접근 권한을 관리합니다.

프로세스는 고유한 프로세스 ID를 가집니다.
이를 통해 운영 체제나 다른 프로세스가 특정 프로세스를 식별할 수 있습니다.

프로세스는 멀티태스킹 운영 체제에서 여러 프로세스가 동시에 실행될 수 있게 하며, 각 프로세스는 작업 단위로 취급됩니다.

운영 체제는 프로세스 스케줄링을 통해 CPU의 사용을 조정합니다.
프로세스는 실행(running), 준비(ready), 대기(blocked) 등의 상태를 가질 수 있으며, 이 상태는 CPU 할당, 입출력 완료 등에 따라 변화합니다.
또한, 프로세스는 다른 프로세스를 생성(fork)하거나, 메시지를 통해 다른 프로세스와 통신(IPC, Inter-Process Communication)하는 것이 가능합니다.

마지막으로, 프로세스는 '스레드'라는 개념과 밀접하게 관련되어 있습니다.
스레드는 프로세스 내에서 실행되는 독립적인 실행 흐름으로, 동일한 프로세스 내의 스레드는 메모리와 자원을 공유하면서 병렬적으로 작업을 수행할 수 있습니다.
이는 멀티프로세서와 멀티코어 시스템에서 특히 유용합니다.
