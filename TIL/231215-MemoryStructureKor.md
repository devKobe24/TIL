# 메모리 구조 🧩

프로그램이 실행되면 **"운영 체제(OS)는 메모리(RAM)에 이 프로그램을 위한 공간을 할당해줍니다."**

이 공간은 다음 4가지로 구성되어 있습니다.

1. **Code**
2. **Data**
3. **Heap**
4. **Stack**

아래 다이어그램은 메모리와 공간을 나타낸 것 입니다.

<img src = "https://github.com/devKobe24/images/blob/main/memory-struct.png?raw=true"><br>

## 1️⃣ Code 영역.

개발자가 작성한 **"소스 코드"** 가 **"기계어 형태"** 로 저장됩니다.

**"컴파일 타임"** 에 결정되고, 중간에 코드가 변경되지 않도록 **"Read-Only"** 형태로 저장됩니다.

## 2️⃣ Data 영역.

**"전역 변수"** , **"static"** 변수가 저장됩니다.

**"프로그램 시작과 동시에 할당"** 되고,
**"프로그램이 종료 되어야 메모리가 해제 됩니다."**

실행 도중 변수 값이 변경될 수 있으니 **"Read-Write"** 로 지정됩니다.

## 3️⃣ Heap 영역.

**"프로그래머가 할당/해제하는 메모리 영역"** 입니다.

프로그래머는 **"malloc, calloc"** 으로 힙에 메모리를 할당할 수 있으며,
이를 **"동적 할당"** 이라고 합니다.

사용하고 난 후에는 반드시 **"메모리 해제"** 를 해줘야 합니다.
그렇지 않으면 **"memory leak"** 이 발생합니다.

Coda, Data, Stack 중 유일하게 **"런터임 시에 결정"** 되기 때문에
**"데이터의 크기가 확실하지 않을 때 사용합니다."** 

### 3.1 Heap의 장.단점

**1. 장점**
- 메모리 크기에 대한 제한이 없습니다.
- 본질적인 범위가 전역이기 때문에, 프로그램의 모든 함수에서 액세스 할 수 있습니다.

**2. 단점**
- 할당작업, 해제 작업으로 인한 속도 저하.
- 힙 손상(이중 해제, 해제 후 사용 등) 작업으로 인한 속도 저하.
- 힙 경합(두 개 이상 쓰레드가 동시에 접근하려 할 때 Lock)으로 인한 속도 저하.
- 메모리를 직접 관리해야 함(해제해주지 않을 경우 메모리 누수 발생).

## 4️⃣ Stack 영역

**"함수 호출 시 함수의 지역변수, 매개변수, 리턴 값"** 등이 저장되고,
**"함수가 종료되면 저장된 메모리도 해제됩니다."**

**"컴파일 타임에 결정되기 때문에 무한히 할당할 수 없습니다."**

### 4.1 Stack의 장.단점

**1. 장점**
- CPU가 스택 메모리를 효율적으로 구성하기 때문에 속도가 매우 빠릅니다.
- 메모리를 직접 해제를 해주지 않아도 됩니다.

**2. 단점**
- 메모리 크기에 대한 제한이 있습니다.
- 지역 변수만 액세스가 가능합니다.

### 🍗 문장 뜯어 먹기 냠냠(1) !!

1️⃣ 소스 코드(Source code)

🙋‍♂️ **"컴퓨터 프로그램을 작성하기 위한 사람이 읽을 수 있는 텍스트 형식의 코드입니다."**
이 코드는 프로그래밍 언어를 사용하여 작성하되, 컴퓨터가 이해하고 실행할 수 있는 기계 코드로 변환되기 전에 사람이 이해하고 수정할 수 있는 형태로 존재합니다.

소스 코드는 프로그램을 작성하는 데 사용되는 명령어, 함수, 변수 등을 포함하며, 프로그램의 동작을 정의하는 중요한 부분입니다.
소스 코드는 일반적으로 텍스트 에디터나 통합 개발 환경(IDE)과 같은 도구를 사용하여 작성됩니다.

2️⃣ 기계어(Machine language)

🙋‍♂️ **"컴퓨터가 직접 이해하고 실행할 수 있는 가장 낮은 수준의 프로그래밍 언어입니다."**
컴퓨터의 중앙 처리 장치(CPU)가 이해할 수 있는 이진 코드로 표현되며, 이러한 이진 코드는 0과 1로 이루어진 비트 패턴의 형태로 나타납니다.
각 비트 패턴은 컴퓨터의 명령어나 데이터를 나타냅니다.

기계어는 특정 컴퓨터 아키텍처(Architecture)에 종속적이며, 각각의 CPU나 프로세서가 자체적으로 이해할 수 있는 고유한 기계어를 가지고 있습니다.
따라서 다른 컴퓨터 아키텍처에서 동작하려면 해당 아키텍처에 맞는 기계어로 프로그램을 작성해야 합니다.

기계어는 사람이 이해하고 작성하기 어려우며, 프로그래머가 직접 기계어로 프로그램을 개발하는 것은 복잡하고 오류가 발생하기 쉽습니다.
그래서 대부분의 프로그래머는 고수준 프로그래밍 언어(예: C, C++, Java, Swift등)를 사용하여 프로그램을 작성하며, 이러한 고수준 언어로 작성된 프로그램은 컴파일러나 인터프리터를 통해 기계어로 변환되어 실행됩니다.

이 과정을 통해 프로그래머는 더 효율적으로 프로그램을 작성하고, 다양한 컴퓨터 아키텍처에서 실행할 수 있도록 할 수 있습니다.

요약하면, 기계어는 컴퓨터가 직접 실행하는 이진 코드로, 컴퓨터 아키텍처에 종속적이며 사람이 이해하고 작성하기 어려운 프로그래밍 언어입니다.
일반적으로 고수준 언어로 작성된 프로그램은 기계어로 변환되어 실행됩니다.

3️⃣ 컴파일 타임(Compile Time)
**"컴파일 타임은 프로그램을 컴파일하는 과정에서 발생하는 시간을 가리킵니다."**
컴파일 타임은 프로그래밍 언어로 작성된 소스 코드를 컴파일러라는 특별한 프로그램을 사용하여 기계어 코드나 중간 언어로 번역하는 단계에서 일어납니다.

컴파일 타임은 프로그램 개발 단계에서 중요한 부분이며, 소스 코드를 컴파일하여 기계어 코드로 변환하고 오류를 찾아내는 등의 작업을 수행합니다.
컴파일 타임에 발생하는 문제나 오류를 해결함으로써 프로그램의 안정성과 성능을 향상시킬 수 있습니다.

### 🍗 문장 뜯어 먹기 냠냠(2) !!

1️⃣ static

**"static"** 키워드는 클래스 또는 구조체 내에서 사용되며, 해당 멤버(변수, 메서드)가 타입 자체에 속하고 인스턴스와 관련이 없음을 나타냅니다.

이것을 **"타입 메서드"** 또는 **"타입 프로퍼티"** 라고도 합니다.

**"static"** 키워드를 사용하여 정의된 타입 프로퍼티와 타입 메서드는 클래스나 구조체 타입 자체에 속하므로 해당 타입의 모든 인스턴스에서 공유됩니다.

이러한 멤버는 인스턴스의 속성이나 메서드와 달리 클래스 자체 또는 구조체 자체에 직접 액세스할 수 있으므로 유용하게 활용됩니다.
