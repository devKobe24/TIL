# Autolayoutì„ ì½”ë“œë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²• 3ê°€ì§€ ğŸ¤”

ì œì•½ ì¡°ê±´ì„ ì½”ë“œë¡œ ì‘ì„±í•˜ê¸° ìœ„í•œ ë°©ë²•ì€ ì´ 3ê°€ì§€ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.

`layout anchor`ì„ ì‚¬ìš©í•˜ê±°ë‚˜, `NSLayoutConstraint` í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ê·¸ë¦¬ê³  `Visual Format Language`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.

> ì°¸ê³ 
>
> ì½”ë“œë¡œ ì œì•½ì¡°ê±´ì„ ì£¼ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ
> `translatesAutoresizingMaskIntoConstraints`ì˜ ê°’ì„ `false`ë¡œ ì§€ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

## 1ï¸âƒ£ LayoutAnchor

`NSLayoutAnchor`ë¥¼ ì‹œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì œì•½ì„ ì£¼ê³  ì‹¶ì€ ì•„ì´í…œì˜ `anchor` í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, view controllerì˜ topê³¼ bottom layout guidesëŠ” `topAnchor`, `bottomAnchor`ê³¼ `heightAnchor` í”„ë¡œí¼í‹°ê°€ ìˆìŠµë‹ˆë‹¤.

ë°˜ë©´ì— ViewëŠ” `edge`, `center`, `size`, `baseline anchor`ì„ ë…¸ì¶œì‹œí‚µë‹ˆë‹¤.

```swift
// Get the superview's layout
let margins = view.layoutMarginsGuide

// Pin the leading edge of myView to the margin's leading edge
myView.leadingAnchor.constraint(equalTo: margins.leadingAnchor).isActive = true

// Pin the trailing edge of myView to the margin's trailing edge
myView.trailingAnchor.constraint(equalTo: margins.trailingAnchor).isActive = true

// Give myView a 1:2 aspect ratio
myView.heightAnchor.constraint(equalTo: myView.widthAnchor, multiplier: 2.0).isActive = true
```

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%8B%E1%85%A1%E1%84%8B%E1%85%AE%E1%86%BA%E1%84%8B%E1%85%A2%E1%86%BC%E1%84%8F%E1%85%A5.png?raw=true">

`Layout Anchor`ëŠ” ì œì•½ ì¡°ê±´ë“¤ì„ ìƒì„±í•˜ëŠ” ë‹¤ì–‘í•œ ë©”ì†Œë“œë“¤ì„ ê°€ì§€ê³ , ê°ê°ì˜ ë©”ì†Œë“œë“¤ì€ ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ëŠ” ë°©ì •ì‹ì˜ ìš”ì†Œë“¤ë§Œ parameterë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.

```swift
myView.leadingAnchor.constraint(equalTo: margins.leadingAnchor).isActive = true
```

ìœ„ ì½”ë“œì™€ ë°©ì •ì‹ì„ ëŒ€ì‘í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3%E1%84%87%E1%85%A1%E1%86%BC%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%89%E1%85%B5%E1%86%A8.png?raw=true">

ë˜í•œ, `Layout Anchor`ëŠ” ì¶”ê°€ì ì¸ `type safety`ë¥¼ ì œê³µí•˜ëŠ”ë° ì´ë¡œ ì¸í•´ ì˜ëª»ëœ ì œì•½ì¡°ê±´ì´ ìš°ì—°íˆ ë°œìƒí•˜ëŠ” ê²ƒì„ ì˜ˆë°©í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ `horizontalAnchor`ëŠ” ì˜¤ì§ horizontalê³¼ ëŒ€ì‘ë˜ë©°, `multiplier`ëŠ” size ì œì•½ì¡°ê±´ì„ ìœ„í•´ì„œë§Œ ì œê³µë©ë‹ˆë‹¤.

## 2ï¸âƒ£ NSLayoutConstraint Class

ì œì•½ ì¡°ê±´ì„ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ `NSLayoutConstraint` í´ë˜ìŠ¤ì˜ `constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant:` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ë©”ì†Œë“œëŠ” ì œì•½ ë°©ì •ì‹ì„ ëª…ì‹œì ìœ¼ë¡œ ì½”ë“œë¡œ ë³€í™˜í•´ ì¤ë‹ˆë‹¤.

ê° íŒŒë¼ë¯¸í„°ëŠ” ë°©ì •ì‹ê³¼ ëŒ€ì‘ë©ë‹ˆë‹¤.

`Layout Anchor`ì™€ëŠ” ë‹¤ë¥´ê²Œ, ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” íŒŒë¼ë¯¸í„°ì—ë„ ê°’ì„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ ì½”ë“œì˜ ê°€ë…ì„±ì´ ë–¨ì–´ì§„ë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.

ë˜ íŠ¹ì • ì œì•½ì¡°ê±´ì˜ ì¤‘ìš”í•œ íŠ¹ì„±ë“¤ì„ ê°•ì¡°í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì¤‘ìš”í•œ ë””í…Œì¼ì„ ë†“ì¹  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ `Layout Anchor API`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.

```swift
NSLayoutConstraint(item: myView,
                   attribute: .leading,
                   relatedBy: .equal,
                   toItem: view,
                   attribute: .leadingMargin,
                   multiplier: 1.0,
                   constant: 0.0).isActive = true

NSLayoutConstraint(item: myView,
                  attribute: .trailing,
                  relatedBy: .equal,
                  toItem: view,
                  attribute: .trailingMargin,
                  multiplier: 1.0,
                  constant: 0.0).isActive = true

NSLayoutConstraint(item: myView,
                  attribute: .height,
                  relatedBy: .equal,
                  toItem: myView,
                  attribute: .width,
                  multiplier: 2.0,
                  constant: 0.0).isActive = true
```

## 3ï¸âƒ£ Visual Format Language

ì´ ë°©ë²•ì€ ë¬¸ìì—´ê³¼ ASCII-artì„ ì‚¬ìš©í•˜ì—¬ ì œì•½ì¡°ê±´ì„ ì •ì˜í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

ì œì•½ì¡°ê±´ì˜ í‘œí˜„ì„ ì‹œê°ì ì¸ ë¬˜ì‚¬ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.

ë‹¤ìŒì€ `Visual Format Language`ì˜ ì¥ì ê³¼ ë‹¨ì ì…ë‹ˆë‹¤.

- AutoLayoutì€ Visual Format Languageë¥¼ ì´ìš©í•˜ì—¬ ì œì•½ì¡°ê±´ë“¤ì„ ì½˜ì†”ì— ì¶œë ¥í•©ë‹ˆë‹¤.
    - ì´ëŸ¬í•œ ì´ìœ ë¡œ ë””ë²„ê¹… ë©”ì‹œì§€ê°€ ì œì•½ì¡°ê±´ì„ ìƒì„±í•˜ê¸° ìœ„í•œ ì½”ë“œì™€ ë§¤ìš° ìœ ì‚¬í•©ë‹ˆë‹¤.

- Visual Format LanguageëŠ” ì—¬ëŸ¬ ì œì•½ì¡°ê±´ë“¤ì„ í•œë²ˆì— ìƒì„±í•˜ê³  ë§¤ìš° ì»´íŒ©íŠ¸í•œ í‘œí˜„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

- Visual Format LanguageëŠ” ì˜¤ì§ ìœ ìš”í•œ ì œì•½ì¡°ê±´ë“¤ë¡œë§Œ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

- ì´ í‘œí˜„ ë°©ë²•ì€ ì™„ì „ì„±ë³´ë‹¤ ì¢‹ì€ ì‹œê°í™”ì— ì´ˆì ì„ ë‘ê¸° ë•Œë¬¸ì— Visual Format Languageê°€ í‘œí˜„í•  ìˆ˜ ì—†ëŠ” ì œì•½ì¡°ê±´ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

- ì»´íŒŒì¼ëŸ¬ëŠ” ë¬¸ìì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ëŠ” ëŸ°íƒ€ì„ í…ŒìŠ¤íŒ…ì—ì„œë§Œ ë°œê²¬ë©ë‹ˆë‹¤.

Visual Format Languageì„ ì´ìš©í•œ ì œì•½ì¡°ê±´ ìƒì„± ì½”ë“œ.

ì´ ì½”ë“œëŠ” leadingê³¼ trailing ì œì•½ì„ ìƒì„±í•©ë‹ˆë‹¤.

Visual format languageëŠ” default spacingì„ ì‚¬ìš©í•˜ë©´ ìŠˆí¼ë·°ì˜ marginì— 0-point ì œì•½ì„ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ì•ì„œ ë³´ì•˜ë˜ ì˜ˆì‹œë“¤ê³¼ ë™ì¼í•œ ì œì•½ì¡°ê±´ì„ ìƒì„±í•©ë‹ˆë‹¤.

```swift
let views = ["myView" : myView]
let formatString = "|-[myView]-|"

let constraints = NSLayoutConstraint.constraint(withVisualFormat: formatString,
                                               options: .alignAllTop,
                                               metrics: nil,
                                               views: views)

NSLayoutConstraint.activate(constraints)
```

ìœ„ ì½”ë“œì—ì„œëŠ” ê°€ë¡œ ì„¸ë¡œ ë¹„ìœ¨ ì œì•½ì¡°ê±´ì„ ìƒì„±í•  ìˆ˜ ì—†ëŠ”ë°, Visual format languageëŠ” ìŠˆí¼ ë·°ë¥¼ ì œì™¸í•œ ë·°ê°€ ë‘ ê°œ ì´ìƒ ì¡´ì¬í•´ì•¼ ìˆ˜ì§, ìˆ˜í‰ ì œì•½ ì¡°ê±´ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ëŸ¬í•œ ì´ìœ ë¡œ `.alianAllTop`ì€ layoutì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

Visual Format Languageë¥¼ ì‚¬ìš©í•´ì„œ ì œì•½ì¡°ê±´ì„ ìƒì„±í•˜ë ¤ë©´

1. viewë“¤ë¡œ ì´ë£¨ì–´ì§„ dictionaryë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    - ì´ dictionaryëŠ” ë°˜ë“œì‹œ `[String:view object]` í˜•íƒœë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
    - key ê°’ì€ viewì— ëŒ€í•œ format stringì„ ì‹ë³„í•©ë‹ˆë‹¤.

2. (Optional) metrics dictionaryë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    - ì´ dictionaryëŠ” ë°˜ë“œì‹œ `[String: NSNumber]` í˜•íƒœë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
    - keyëŠ” format stringì˜ constant ê°’ì„ ëŒ€í‘œí•©ë‹ˆë‹¤.

3. itemì˜ ë‹¨ì¼ í–‰ê³¼ ì—´ì„ ë°°ì¹˜í•¨ìœ¼ë¡œì¨ format stringì„ ìƒì„±í•©ë‹ˆë‹¤.

4. `NSLayoutConstraint` í´ë˜ìŠ¤ì˜ `constraintWithVisualFormat:options:metrics:views` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
    - ì´ ë©”ì†Œë“œëŠ” ëª¨ë“  ì œì•½ì¡°ê±´ì„ ë‹´ê³ ìˆëŠ” ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

5. `NSLayoutConstraint` í´ë˜ìŠ¤ì˜ `activateConstraint:` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì„œ ëª¨ë“  ì œì•½ì¡°ê±´ì€ í™œì„±í™” í•©ë‹ˆë‹¤.
