# Cocoa MVC

## Model - View - Controller

MVC(Model - View - Controller) 디자인 패턴은 꽤 오래되었습니다.

적어도 스몰토크 초기부터 다양한 변형이 있었습니다.

이는 애플리케이션의 전역 아키텍저와 관련이 있고 애플리케이션에서 수행하는 일반적인 역할에 따라 개체를 분류한다는 점에서 높은 수준의 패턴입니다.

또한 여러 가지 기본 패턴으로 구성되어 있다는 점에서 복합 패턴이기도 합니다.

객체 지향 프로그램은 MVC 디자인 패턴을 해당 디자인에 적용함으로써 여러 면에서 이점을 얻습니다.

이러한 프로그램의 많은 개체는 재사용이 더 용이하고 해당 인터페이스가 더 잘 정의되는 경향이 있습니다.

프로그램은 전반적으로 변화하는 요구 사항에 더 잘 적응합니다.

즉, MVC를 기반으로 하지 않는 프로그램보다 더 쉽게 확장할 수 있습니다.

더욱이 바인딩, documents architecture, 스크립트 기능과 같은 코코아의 많은 기술과 아키텍처는 MVC를 기반으로 하며 사용자 정의 객체가 MVC에서 정의한 역할 중 하나를 수행하도록 요구합니다.

> Documents architecture
>
> Documents architecture는 일반적으로 문서 중심의 소프트웨어 시스템을 설계하는 방법론을 말합니다.
> 
> 이 용어는 특히 애플리케이션이 문서 생성, 편집, 저장 및 관리에 중점을 둘 때 사용됩니다.
> 
> > Document architecture의 핵심 구성 요소와 원칙
> > 
> > 1. **Document Model**
> > - 문서 모델은 문서의 데이터 구조를 정의합니다. 이 모델은 문서의 내용, 메타데이터, 상태 정보 등을 캡슐화합니다.
> > - 데이터 구조는 텍스트, 이미지, 표 등 다양한 종류의 데이터를 포함할 수 있으며, 문서의 논리적 구조와 레이아웃 정보를 정의합니다.
> > 
> > 2. **Document View**
> > - 문서 뷰는 사용자에게 문서를 시각적으로 표시합니다. 이는 사용자가 문서의 내용을 읽고, 편집하여, 다른 형식으로 내보낼 수 있게 해주는 인터페이스입니다.
> > - 뷰는 문서의 구조와 형식을 사용자에게 그래픽으로 렌더링하며, 사용자의 입력에 따라 동적으로 갱신될 수 있습니다.
> > 
> > 3. **Document Controller**
> > - 문서 컨트롤러는 사용자의 입력을 처리하고 문서 모델을 업데이트하는 로직을 담당합니다.
> > - 이는 사용자가 문서에 대해 수행하는 명령어(예: 저장, 닫기, 인괘 등)를 관리하고, 이러한 명령어에 따라 문서 모델과 뷰의 상태를 변경합니다.
> > 
> > 4. **Document Storage**
> > - 문서 저장 구조는 문서를 파일 시스템이나 데이터베이스에 저장하고 검색하는 방법을 정의합니다.
> > - 이는 문서를 영구적으로 저장하고, 버전 관리, 동기화, 백업 등의 기능을 제공할 수 있습니다.
> > 
> > 5. **Interoperability**
> > - 문서 아키텍처는 다양한 파일 형식과의 호환성을 고려합니다. 이는 문서를 다른 애플리케이션 또는 플랫폼 간에 교환한 수 있게 해줍니다.
> > 
> Documents architecture는 주로 문서 중심의 애플리케이션, 예를 들어 워드 프로세서, 스프레드시트, 그래픽 디자인 소프트웨어 등에서 볼 수 있습니다.
> 
> 이러한 아키텍처는 문서의 생명주기 전체를 관리하고, 사용자가 효율적으로 문서를 생성하고 수정할 수 있도록 지원하는 것을 목표로 합니다.
> 
> 애플의 macOS에서는 이러한 개념이 Cocoa Documents architecture 내에서 구현됩니다.
> 
> 여기서 NSDocument 클래스와 관련 서브클래스들은 문서의 로딩, 편집, 저장 및 자동 저장과 같은 기능을 처리하며, 사용자의 인터페이스와 상호 작용하는 데 필요한 모든 것을 제공합니다.

## Rolse and Relationships of MVC objects

MVC 디자인 패턴에서는 모델 객체, 뷰 객체, 컨트롤러 객체의 세 가지 유형의 객체가 있다고 간주합니다.

MVC 패턴은 이러한 유형의 객체가 애플리케이션과 해당 통신 라인에서 수행하는 역할을 정의합니다.

애플리케이션을 디자인할 때 주요 단계는 이 세 그룹 중 하나에 속하는 개체를 선택하거나 해당 개체에 대한 사용자 정의 클래스를 만드는 것입니다.

세 가지 유형의 객체로는 각각 추상적인 경계로 서로 분리되어 있으며, 이러한 경계를 넘어 다른 유형의 객체와 통신합니다.

## Model Objects Encapsulate Data and Basic Behaviors

모델 객체는 특별한 지식과 전문성을 나타냅니다.

애플리케이션의 데이터를 보유하고 해당 데이터를 조작하는 논리를 정의합니다.

잘 설계된 MVC 애플리케이션에는 모든 중요한 데이터가 모델 객체에 캡슐과 되어 있습니다.

애플리케이션의 지속 상태의 일부인 모든 데이터(지속 상태가 파일 또는 데이터베이스에 저장되어 있는지 여부)는 데이터가 애플리케이션에 로드 되면 모델 객체에 상주해야 합니다.

특정 문제 영역과 관련된 지식과 전문 지식을 나타내기 때문에 재사용이 가능한 경향이 있습니다.

이상적으로 모델 개체는 이를 표시하고 편집하는 데 사용되는 사용자 인터페이스에 대한 명시적인 연결이 없습니다.

예를 들어, 사람을 나타내는 모델 개체가 있는 경우(예: 주소록을 작성하는 경우)

생년월일을 저장할 수 있습니다.

Person 모델 객체에 저장하는 것이 좋습니다.

그러나 날짜 형식 문자열이나 해당 날짜 표시 방법에 대한 기타 정보를 저장하는 것이 아마도 다른 곳에 저장하는 것이 더 나을 것입니다.

실제로 이러한 분리가 항상 최선은 아니며 여기에 유연성의 여지가 있지만 일반적으로 모델 객체는 인터페이스 및 프리젠테이션 문제와 관련되어서는 안 됩니다.

약간의 예외가 합당한 한 가지 예는 표시된 그래픽을 나타내는 모델 개체가 있는 그리기 응용 프로그램입니다.

그래픽 객체의 존재 이유는 시각적인 것을 정의하는 것이기 때문에 그래픽 객체가 스스로 그리는 방법을 아는 것이 합리적입니다.

그러나 이 경우에도 그래픽 객체는 특정한 뷰나 어떤 뷰에 사는 데 전혀 의존해서는 안 되며, 언제 그려야 할지 아는 일을 담당해서는 안됩니다.

그들은 자신을 표현하려는 뷰 객체에 의해 자신을 그리도록 요청받아야 합니다.

## View Objects Present Information to the User

뷰 객체는 애플리케이션 모델의 데이터를 표시하는 방법을 알고 사용자가 편집하도록 허용할 수 있습니다.

뷰는 표시되는 데이터를 저장하는 일을 담당해서는 안 됩니다.(물론 뷰가 표시하는 데이터를 실제로 저장하지 않는다는 의미는 아닙니다. 뷰는 성능상의 이유로 데이터를 캐시하거나 유사한 트릭을 수행할 수 있습니다.)

뷰 객체는 모델 객체의 한 부분, 전체 모델 객체, 심지어는 다양한 모델 객체를 표시하는 일을 담당할 수 있습니다.

견해는 매우 다양합니다.

뷰 객체는 재사용 및 구성이 가능한 경향이 있으며 애플리케이션 간의 일관성을 제공합니다.

Cocoa에서 AppKit 프레임워크는 수많은 뷰 객체를 정의하고 그 중 다수를 인터페이스 빌더 라이브러리에 제공합니다.

NSButton 객체와 같은 AppKit의 뷰 객체를 재사용하면 다른 Cocoa 애플리케이션의 버튼처럼 작동하도록 보장하여 애플리케이션 전체의 모양과 동작에 있어 높은 수준의 일관성을 보장할 수 있습니다.

뷰는 모델이 올바르게 표시되는지 확인해야 합니다.

결과적으로 일반적으로 모델 변경 사항을 알아야 합니다.

모델 객체는 특정 뷰 객체에 연결되어서는 안 되기 때문에 변경되었음을 나타내는 일반적인 방법이 필요합니다.

## Controller Objects Tie the Model to the View

컨트롤러 객체는 애플리케이션의 뷰 객체와 모델 객체 사이의 중개자 역할을 합니다.

컨트롤러는 뷰가 표시해야 하는 모델 객체에 액세스 할 수 있는지 확인하고 뷰가 모델 변경 사항을 학습하는 통로 역할을 하는 경우가 많습니다.

컨트롤러 개체는 응용 프로그램에 대한 설정 및 조정 작업을 수행하고 다른 개체의 수명 주기를 관리할 수도 있습니다.

일반적인 Cocoa MVC 디자인에서는 사용자가 값을 입력하거나 뷰 객체를 통해 선택 사항을 표시하면 해당 값 또는 선택 사항이 컨트롤러 객체에 전달됩니다.

컨트롤러 객체는 사용자 입력을 애플리케이션 고유 방식으로 해석한 다음 모델 객체에 이 입력에 대해 수행할 작업(예: "새 값 추가" 또는 "현재 레코드 삭제")을 지시하거나 모델 객체의 속성 중 하나에 변경된 값을 반영하도록 할 수 있습니다.

이와 동일한 사용자 입력을 기반으로 일부 컨트롤러 개체는 뷰 개체에 버튼 자체를 비활성화하도록 지시하는 등 모양이나 동작의 측면을 변경하도록 지시할 수도 있습니다.

반대로, 모델 개체가 변경되면(예: 새 데이터 원본에 액세스) 모델 개체는 일반적으로 해당 변경 사항을 컨트롤러 개체에 전달하고, 컨트롤러 개체는 그에 따라 하나 이상의 뷰 개체를 업데이트하도록 요청합니다.

컨트롤러 객체는 일반적인 유형에 따라 재사용이 가능하거나 재사용이 불가능할 수 있습니다.

[Types of Cocoa Controller Objects](https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html#//apple_ref/doc/uid/TP40010810-CH14-SW7)은 코코아의 다양한 컨트롤러 객체 유형에 대해 설명합니다.

## Combining Roles

예를 들어 객체가 수행하는 MVC 역할을 병합하여 객체가 컨트롤러와 뷰 역할을 모두 수행하도록 만들 수 있습니다.

이 경우 뷰 컨트롤러라고 합니다.

같은 방식으로 모델 컨트롤러 개체도 가질 수 있습니다.

일부 애플리케이션의 경우 이와 같은 역할을 결합하는 것이 허용되는 디자인입니다.

모델 컨트롤러는 주로 모델 계층과 관련된 컨트롤러입니다.

모델을 "소유" 합니다.

주요 책임은 모델을 관리하고 뷰 객체와 통신하는 것입니다.

모델 전체에 적용되는 작업 메서드는 일반적으로 모델 컨트롤러에서 구현됩니다.

문서 아키텍처는 이러한 다양한 방법을 제공합니다.

예를 들어 NSDocument 개체(문서 아키텍처의 핵심 부분)는 파일 저장과 관련된 작업 메서드를 자동으로 처리합니다.

뷰 컨트롤러는 주로 뷰 레이어와 관련된 컨트롤러입니다.

인터페이스(뷰)를 "소유"합니다.

주요 책임은 인터페이스를 관리하고 모델과 통신하는 것입니다.

뷰에 표시되는 데이터와 관련된 작업 메서드는 일반적으로 뷰 컨트롤러에서 구현됩니다.

[NSWindowController](https://developer.apple.com/documentation/appkit/nswindowcontroller)객체(문서 아키텍처의 일부이기도 함)는 뷰 컨트롤러의 예입니다.

[Design Guidelines for MVC Applications](https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html#//apple_ref/doc/uid/TP40010810-CH14-SW14)은 병합된 MVC 역할이 있는 객체에 관한 몇 가지 디자인 조언을 제공합니다.

### 참고 문서

- [Apple Documentation Archive](https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html)
